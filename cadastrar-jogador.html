<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Cadastrar Jogador</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white rounded-2xl shadow p-8 w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4">Cadastrar Jogador</h1>
    <form id="formCadastro">
      <label class="block text-sm">Nome</label>
      <input id="jNome" class="w-full px-3 py-2 border rounded mb-3" required />
      <label class="block text-sm">Data de nascimento (senha)</label>
      <input id="jData" type="date" class="w-full px-3 py-2 border rounded mb-4" required />
      <button class="w-full bg-green-600 text-white py-2 rounded">Cadastrar</button>
    </form>
    <p id="msgCad" class="mt-3"></p>
    <p class="mt-4 text-sm text-gray-600">Já cadastrado? Vá para <a href="jogador.html" class="text-blue-600 underline">Área do Jogador</a>.</p>
  </div>

<script>
const SUPABASE_URL = "https://biojnilbgzozmynemtra.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpb2puaWxiZ3pvem15bmVtdHJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NDM5MzEsImV4cCI6MjA3MjIxOTkzMX0.F8MyL33SdQ7RViOF5RWgoZh8vC6hsyNqmqUXmRcNPDM";
const supabase = supabaseJsClient();

function supabaseJsClient(){ return window.supabase && typeof window.supabase.createClient === 'function' ? window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY) : window.supabase = window.supabase || window.supabase || (window.supabase = window.supabase = window.supabase || window.supabase); }

document.getElementById('formCadastro').addEventListener('submit', async (e) => {
  e.preventDefault();
  const nome = document.getElementById('jNome').value.trim();
  const dt = document.getElementById('jData').value;
  if(!nome || !dt) return alert('Preencha os campos');

  // insert into usuarios (assumes table 'usuarios' with columns nome, dt_nascimento, criado_em)
  const { data, error } = await window.supabase.from('usuarios').insert([{ nome, dt_nascimento: dt, criado_em: new Date() }]);
  const msg = document.getElementById('msgCad');
  if(error){ msg.textContent = 'Erro: ' + error.message; msg.className='text-red-500'; }
  else{ msg.textContent = 'Jogador cadastrado! Agora faça login.'; msg.className='text-green-600'; document.getElementById('formCadastro').reset(); }
});
</script>
</body>
</html>
