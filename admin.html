<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel Administrativo</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = "https://YOUR_PROJECT.supabase.co";
    const SUPABASE_KEY = "YOUR_PUBLIC_ANON_KEY";
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
  </script>
  <style>
    body { font-family:Arial, sans-serif; background:#eef2f7; margin:0; }
    .login, .painel { display:none; }
    .container { max-width:1000px; margin:30px auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    nav { display:flex; gap:10px; margin-bottom:20px; }
    nav button { flex:1; padding:12px; border:none; border-radius:8px; cursor:pointer; background:#007bff; color:white; font-weight:bold; }
    nav button:hover { background:#0056b3; }
    section { display:none; }
    section.active { display:block; }
    form { display:grid; gap:10px; margin-bottom:20px; }
    input, select { padding:10px; border:1px solid #ccc; border-radius:6px; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    table, th, td { border:1px solid #ddd; }
    th, td { padding:10px; text-align:left; }
  </style>
</head>
<body>
  <!-- Login -->
  <div class="login container" id="login">
    <h2>Login Admin</h2>
    <form id="loginForm">
      <input type="text" id="username" placeholder="Usuário" required>
      <input type="password" id="password" placeholder="Senha" required>
      <button type="submit">Entrar</button>
    </form>
  </div>

  <!-- Painel -->
  <div class="painel container" id="painel">
    <h2>Painel Administrativo</h2>
    <nav>
      <button onclick="showTab('participantes')">Participantes</button>
      <button onclick="showTab('palpiteiros')">Palpiteiros</button>
      <button onclick="showTab('gabaritos')">Gabaritos</button>
      <button onclick="showTab('pontuacao')">Pontuação</button>
    </nav>

    <section id="participantes">
      <h3>Cadastrar Participante</h3>
      <form id="formParticipante">
        <input type="text" id="nomeParticipante" placeholder="Nome do Participante" required>
        <button type="submit">Salvar</button>
      </form>
      <table id="listaParticipantes"><thead><tr><th>Nome</th></tr></thead><tbody></tbody></table>
    </section>

    <section id="palpiteiros">
      <h3>Cadastrar Palpiteiro</h3>
      <form id="formPalpiteiro">
        <input type="text" id="nomePalpiteiro" placeholder="Nome do Palpiteiro" required>
        <button type="submit">Salvar</button>
      </form>
      <table id="listaPalpiteiros"><thead><tr><th>Nome</th></tr></thead><tbody></tbody></table>
    </section>

    <section id="gabaritos">
      <h3>Cadastrar Gabarito</h3>
      <form id="formGabarito">
        <select id="tipo">
          <option value="LIDER">Líder</option>
          <option value="ANJO">Anjo</option>
          <option value="EMPAREDADO">Emparedado</option>
          <option value="ELIMINADO">Eliminado</option>
          <option value="BATEVOLTA">Bate e Volta</option>
        </select>
        <input type="text" id="valor" placeholder="Nome do Participante" required>
        <button type="submit">Salvar</button>
      </form>
      <table id="listaGabaritos"><thead><tr><th>Tipo</th><th>Valor</th></tr></thead><tbody></tbody></table>
    </section>

    <section id="pontuacao">
      <h3>Definir Pontuação</h3>
      <form id="formPontuacao">
        <select id="evento">
          <option value="LIDER">Líder</option>
          <option value="ANJO">Anjo</option>
          <option value="EMPAREDADO">Emparedado</option>
          <option value="ELIMINADO">Eliminado</option>
          <option value="BATEVOLTA">Bate e Volta</option>
        </select>
        <input type="number" id="pontos" placeholder="Pontos" required>
        <button type="submit">Salvar</button>
      </form>
      <table id="listaPontuacao"><thead><tr><th>Evento</th><th>Pontos</th></tr></thead><tbody></tbody></table>
    </section>
  </div>

  <script>
    const loginDiv = document.getElementById("login");
    const painelDiv = document.getElementById("painel");

    // Tab control
    function showTab(tab) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(tab).classList.add("active");
    }
    showTab("participantes");

    // Login simples
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      if(user==="admin" && pass==="admin"){ // <- depois pode vir do Supabase
        loginDiv.style.display="none";
        painelDiv.style.display="block";
      } else {
        alert("Usuário ou senha inválidos!");
      }
    });

    // Cadastro Participantes
    document.getElementById("formParticipante").addEventListener("submit", async(e)=>{
      e.preventDefault();
      const nome = document.getElementById("nomeParticipante").value;
      await supabase.from("participantes").insert([{ nome }]);
      carregarParticipantes();
    });
    async function carregarParticipantes(){
      const { data } = await supabase.from("participantes").select("*");
      const tbody = document.querySelector("#listaParticipantes tbody");
      tbody.innerHTML="";
      data.forEach(p=> tbody.innerHTML+=`<tr><td>${p.nome}</td></tr>`);
    }

    // Cadastro Palpiteiros
    document.getElementById("formPalpiteiro").addEventListener("submit", async(e)=>{
      e.preventDefault();
      const nome = document.getElementById("nomePalpiteiro").value;
      await supabase.from("palpiteiros").insert([{ nome }]);
      carregarPalpiteiros();
    });
    async function carregarPalpiteiros(){
      const { data } = await supabase.from("palpiteiros").select("*");
      const tbody = document.querySelector("#listaPalpiteiros tbody");
      tbody.innerHTML="";
      data.forEach(p=> tbody.innerHTML+=`<tr><td>${p.nome}</td></tr>`);
    }

    // Cadastro Gabaritos
    document.getElementById("formGabarito").addEventListener("submit", async(e)=>{
      e.preventDefault();
      const tipo = document.getElementById("tipo").value;
      const valor = document.getElementById("valor").value;
      await supabase.from("gabaritos").insert([{ tipo, valor }]);
      carregarGabaritos();
    });
    async function carregarGabaritos(){
      const { data } = await supabase.from("gabaritos").select("*");
      const tbody = document.querySelector("#listaGabaritos tbody");
      tbody.innerHTML="";
      data.forEach(g=> tbody.innerHTML+=`<tr><td>${g.tipo}</td><td>${g.valor}</td></tr>`);
    }

    // Pontuação
    document.getElementById("formPontuacao").addEventListener("submit", async(e)=>{
      e.preventDefault();
      const evento = document.getElementById("evento").value;
      const pontos = document.getElementById("pontos").value;
      await supabase.from("pontuacao").upsert([{ evento, pontos }], { onConflict:"evento" });
      carregarPontuacao();
    });
    async function carregarPontuacao(){
      const { data } = await supabase.from("pontuacao").select("*");
      const tbody = document.querySelector("#listaPontuacao tbody");
      tbody.innerHTML="";
      data.forEach(p=> tbody.innerHTML+=`<tr><td>${p.evento}</td><td>${p.pontos}</td></tr>`);
    }

    // Carregar tudo
    carregarParticipantes();
    carregarPalpiteiros();
    carregarGabaritos();
    carregarPontuacao();
  </script>
</body>
</html>
